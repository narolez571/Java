<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping package="com.suggs.sandbox.hibernate.caveatEmptor">
	
	<class name="User" table="CE_USER">
		<id name="id" column="ID" type="long">
            <generator class="sequence">
                <param name="sequence">CE_USER_SEQ</param>
            </generator>
		</id>
		<!-- -->
		<property name="firstName" column="FIRST_NAME" type="string" not-null="true"/>
		<!-- -->
		<property name="lastName" column="LAST_NAME" type="string" not-null="true"/>
		<!-- -->
		<property name="username" column="USERNAME" type="string" not-null="true"/>
		<!-- -->
		<property name="password" column="PASSWORD" type="string" not-null="true"/>
		<!-- -->
		<property name="email" column="EMAIL" type="string" not-null="true"/>
		<!-- -->
		<property name="ranking" column="RANKING" type="integer" not-null="true"/>
		<!-- -->
		<property name="created" column="CREATED" type="timestamp" not-null="true"/>
		<!-- address has no persistemnt identity outside the context of the user class/table -->
		<component name="homeAddress" class="Address">
			<property name="street" type="string" column="HOME_STREET" not-null="true"/>
			<property name="city" type="string" column="HOME_CITY" not-null="true"/>
			<property name="zipCode" type="string" column="HOME_ZIPCODE" not-null="true"/>
		</component>
		<!-- billing details -->	
		<component name="billingAddress" class="Address">
			<property name="street" type="string" column="BILLING_STREET" not-null="true"/>
			<property name="city" type="string" column="BILLING_CITY" not-null="true"/>
			<property name="zipCode" type="string" column="BILLING_ZIPCODE" not-null="true"/>
		</component>
        <!-- billing details ... refs to the user are held in the billingDetails table -->
        <set name="billingDetails" inverse="true" cascade="all-delete-orphan">
            <key column="USER_ID"/>
            <one-to-many class="BillingDetails"/>
        </set>
        <!-- items for sale ... refs to Users (selers) held in Items table -->
        <set name="itemsForSale" inverse="true" cascade="all-delete-orphan">
            <key column="USER_ID"/>
            <one-to-many class="Item"/>
        </set>
        <!-- bids ... refs to Users held in Bids table -->
        <set name="bids" inverse="true" cascade="all-delete-orphan">
            <key column="USER_ID"/>
            <one-to-many class="Bid"/>
        </set>
        <!-- comments ... refs to Users held in Comments table -->
        <set name="comments" inverse="true" cascade="all-delete-orphan">
            <key column="FROM_USER_ID"/>
            <one-to-many class="Comment"/>
        </set>
	</class>
	
</hibernate-mapping>